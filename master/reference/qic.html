<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Statistical process control charts. — qic • qicharts2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Statistical process control charts. — qic"><meta name="description" content="The qic() function creates run charts and Shewhart control charts for
process control and improvement. Included control charts are: I, MR, Xbar, S,
T, C, U, U', P, P', and G charts."><meta property="og:description" content="The qic() function creates run charts and Shewhart control charts for
process control and improvement. Included control charts are: I, MR, Xbar, S,
T, C, U, U', P, P', and G charts."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-104156888-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-104156888-1');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">qicharts2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href=".././index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/qicharts2.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/anhoej/qicharts2"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Statistical process control charts.</h1>
      <small class="dont-index">Source: <a href="https://github.com/anhoej/qicharts2/blob/master/R/qic.R" class="external-link"><code>R/qic.R</code></a></small>
      <div class="d-none name"><code>qic.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>qic()</code> function creates run charts and Shewhart control charts for
process control and improvement. Included control charts are: I, MR, Xbar, S,
T, C, U, U', P, P', and G charts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">qic</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facets <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  notes <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  chart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"run"</span>, <span class="st">"i"</span>, <span class="st">"mr"</span>, <span class="st">"xbar"</span>, <span class="st">"s"</span>, <span class="st">"t"</span>, <span class="st">"p"</span>, <span class="st">"pp"</span>, <span class="st">"c"</span>, <span class="st">"u"</span>, <span class="st">"up"</span>, <span class="st">"g"</span>, <span class="st">"ip"</span><span class="op">)</span>,</span>
<span>  agg.fun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span>, <span class="st">"sum"</span>, <span class="st">"sd"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"anhoej"</span>, <span class="st">"bestbox"</span>, <span class="st">"cutbox"</span><span class="op">)</span>,</span>
<span>  multiply <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  freeze <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  part <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target <span class="op">=</span> <span class="cn">NA</span> <span class="op">*</span> <span class="fl">1</span>,</span>
<span>  cl <span class="op">=</span> <span class="cn">NA</span> <span class="op">*</span> <span class="fl">1</span>,</span>
<span>  nrow <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scales <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">""</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Value"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Subgroup"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  caption <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  part.labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show.labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">facets</span><span class="op">)</span>,</span>
<span>  show.95 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  decimals <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point.size <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  x.period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x.format <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x.angle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x.pad <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  y.expand <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y.neg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  y.percent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  y.percent.accuracy <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show.grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  strip.horizontal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  print.summary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return.data <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Vector of subgroup values to plot along the x axis.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Vector of measures or counts to plot on the y axis (numerator).</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Vector of subgroup sizes (denominator).</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame containing variables used in the plot.</p></dd>


<dt id="arg-facets">facets<a class="anchor" aria-label="anchor" href="#arg-facets"></a></dt>
<dd><p>One or two sided formula with factors used for facetting plots.</p></dd>


<dt id="arg-notes">notes<a class="anchor" aria-label="anchor" href="#arg-notes"></a></dt>
<dd><p>Character vector of notes to be added to individual data points.</p></dd>


<dt id="arg-chart">chart<a class="anchor" aria-label="anchor" href="#arg-chart"></a></dt>
<dd><p>Character value indicating the chart type. Possible values are:
'run' (default), 'i', 'ip', 'mr', 'xbar', 't', 's', 'c', 'u', 'up', 'p', 'pp',
and 'g'.</p></dd>


<dt id="arg-agg-fun">agg.fun<a class="anchor" aria-label="anchor" href="#arg-agg-fun"></a></dt>
<dd><p>Aggregate function for summarising the y variable if there are
more than one observation per subgroup. Only relevant for run charts and I
charts. Possible values are: 'mean' (default), 'median', 'sum', and 'sd'.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character indicating the method used for runs analysis. One of
'anhoej' (default), 'bestbox', and 'cutbox'. EXPERIMENTAL!</p></dd>


<dt id="arg-multiply">multiply<a class="anchor" aria-label="anchor" href="#arg-multiply"></a></dt>
<dd><p>Number indicating a number to multiply y axis by, e.g. 100
for percents rather than proportions. See also <code>y.percent</code> argument.</p></dd>


<dt id="arg-freeze">freeze<a class="anchor" aria-label="anchor" href="#arg-freeze"></a></dt>
<dd><p>Integer indicating the last data point to include in
calculation of baseline parameters for centre and control lines. Ignored if
part argument is given.</p></dd>


<dt id="arg-part">part<a class="anchor" aria-label="anchor" href="#arg-part"></a></dt>
<dd><p>Either integer vector indicating data points before recalculation
of centre and control lines or character vector indicating chart parts.</p></dd>


<dt id="arg-exclude">exclude<a class="anchor" aria-label="anchor" href="#arg-exclude"></a></dt>
<dd><p>Integer vector indicating data points to exclude from
calculations of centre and control lines.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>Numeric, either a single value indicating a target value to be
plotted as a horizontal line or a vector for variable target line.</p></dd>


<dt id="arg-cl">cl<a class="anchor" aria-label="anchor" href="#arg-cl"></a></dt>
<dd><p>Numeric, either a single value indicating the centre line if known
in advance or a vector for variable centre line.</p></dd>


<dt id="arg-nrow-ncol">nrow, ncol<a class="anchor" aria-label="anchor" href="#arg-nrow-ncol"></a></dt>
<dd><p>Number indicating the preferred number of rows and columns
in facets.</p></dd>


<dt id="arg-scales">scales<a class="anchor" aria-label="anchor" href="#arg-scales"></a></dt>
<dd><p>Character string, one of 'fixed' (default), 'free_y', 'free_x',
or 'free' indicating whether y and x axis scales should be the same for all
panels or free.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Character string specifying the title of the plot.</p></dd>


<dt id="arg-ylab">ylab<a class="anchor" aria-label="anchor" href="#arg-ylab"></a></dt>
<dd><p>Character string specifying the y axis label.</p></dd>


<dt id="arg-xlab">xlab<a class="anchor" aria-label="anchor" href="#arg-xlab"></a></dt>
<dd><p>Character string specifying the x axis label.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Character string specifying the subtitle.</p></dd>


<dt id="arg-caption">caption<a class="anchor" aria-label="anchor" href="#arg-caption"></a></dt>
<dd><p>Character string specifying the caption.</p></dd>


<dt id="arg-part-labels">part.labels<a class="anchor" aria-label="anchor" href="#arg-part-labels"></a></dt>
<dd><p>Character vector specifying  labels for chart parts
created with the freeze or part argument.</p></dd>


<dt id="arg-show-labels">show.labels<a class="anchor" aria-label="anchor" href="#arg-show-labels"></a></dt>
<dd><p>Logical indicating whether to show labels for centre and
control lines on chart. Defaults to TRUE when facets argument is NULL.</p></dd>


<dt id="arg-show-">show.95<a class="anchor" aria-label="anchor" href="#arg-show-"></a></dt>
<dd><p>Logical indicating whether to show 95<!-- % (2 sigma) -->
control limits on chart. Defaults to FALSE.</p></dd>


<dt id="arg-decimals">decimals<a class="anchor" aria-label="anchor" href="#arg-decimals"></a></dt>
<dd><p>Integer indicating the preferred number of decimals in centre
and control line labels.</p></dd>


<dt id="arg-point-size">point.size<a class="anchor" aria-label="anchor" href="#arg-point-size"></a></dt>
<dd><p>Number specifying the size of data points.</p></dd>


<dt id="arg-x-period">x.period<a class="anchor" aria-label="anchor" href="#arg-x-period"></a></dt>
<dd><p>Character string specifying the interval cut points of
datetime x values used for aggregating y values by week, month, etc. See
the breaks argument of <code>?cut.POSIXt()</code> for possible values.</p></dd>


<dt id="arg-x-format">x.format<a class="anchor" aria-label="anchor" href="#arg-x-format"></a></dt>
<dd><p>Date format of x axis labels. See <code>?strftime()</code> for
possible date formats.</p></dd>


<dt id="arg-x-angle">x.angle<a class="anchor" aria-label="anchor" href="#arg-x-angle"></a></dt>
<dd><p>Number indicating the angle of x axis labels.</p></dd>


<dt id="arg-x-pad">x.pad<a class="anchor" aria-label="anchor" href="#arg-x-pad"></a></dt>
<dd><p>Number indicating expansion of x axis to make room for axis
labels.</p></dd>


<dt id="arg-y-expand">y.expand<a class="anchor" aria-label="anchor" href="#arg-y-expand"></a></dt>
<dd><p>Numeric value to include in y axis. Useful e.g. for starting
the y axis at zero.</p></dd>


<dt id="arg-y-neg">y.neg<a class="anchor" aria-label="anchor" href="#arg-y-neg"></a></dt>
<dd><p>If TRUE (default), the y axis is allowed to be negative (only
relevant for I and Xbar charts).</p></dd>


<dt id="arg-y-percent">y.percent<a class="anchor" aria-label="anchor" href="#arg-y-percent"></a></dt>
<dd><p>If TRUE, formats y axis labels as percentages.</p></dd>


<dt id="arg-y-percent-accuracy">y.percent.accuracy<a class="anchor" aria-label="anchor" href="#arg-y-percent-accuracy"></a></dt>
<dd><p>A number to round percentage labels on y axis. Use
1 to show no decimals, 0.1 to show 1 decimal etc.</p></dd>


<dt id="arg-show-grid">show.grid<a class="anchor" aria-label="anchor" href="#arg-show-grid"></a></dt>
<dd><p>If TRUE, shows grid.</p></dd>


<dt id="arg-flip">flip<a class="anchor" aria-label="anchor" href="#arg-flip"></a></dt>
<dd><p>If TRUE, rotates the plot 90 degrees.</p></dd>


<dt id="arg-strip-horizontal">strip.horizontal<a class="anchor" aria-label="anchor" href="#arg-strip-horizontal"></a></dt>
<dd><p>If TRUE, makes y strip horizontal.</p></dd>


<dt id="arg-print-summary">print.summary<a class="anchor" aria-label="anchor" href="#arg-print-summary"></a></dt>
<dd><p>If TRUE, prints summary.</p></dd>


<dt id="arg-return-data">return.data<a class="anchor" aria-label="anchor" href="#arg-return-data"></a></dt>
<dd><p>If TRUE, returns underlying data frame.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>qic</code> object. Inherits from 'ggplot'.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Non-random variation in the form of minor to moderate persistent shifts in
data over time is (by default) identified by the Anhoej rules for unusually
long runs and unusually few crossing. Use the EXPERIMENTAL method argument to
apply the bestbox or cutbox methods as described in Anhøj &amp; Wentzel-Larsen
(2020) <a href="https://doi.org/10.1371/journal.pone.0233920" class="external-link">doi:10.1371/journal.pone.0233920</a>
.</p>
<p>Special cause variation in the form of larger, possibly transient, shifts in
data is identified by Shewhart's 3-sigma rule (Mohammed, Worthington,
Woodall (2008) <a href="https://doi.org/10.1136/qshc.2004.012047" class="external-link">doi:10.1136/qshc.2004.012047</a>
).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>vignette('qic')</code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Lock random number generator to make reproducible results.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Generate vector of 24 random normal numbers</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">24</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run chart</span></span></span>
<span class="r-in"><span><span class="fu">qic</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="qic-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># I control chart</span></span></span>
<span class="r-in"><span><span class="fu">qic</span><span class="op">(</span><span class="va">y</span>, chart <span class="op">=</span> <span class="st">'i'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="qic-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># U control chart from build-in data set of hospital infection rates faceted</span></span></span>
<span class="r-in"><span><span class="co">#   by hospital and type of infection.</span></span></span>
<span class="r-in"><span><span class="fu">qic</span><span class="op">(</span><span class="va">month</span>, <span class="va">n</span>,</span></span>
<span class="r-in"><span>    n        <span class="op">=</span> <span class="va">days</span>,</span></span>
<span class="r-in"><span>    data     <span class="op">=</span> <span class="va">hospital_infections</span>,</span></span>
<span class="r-in"><span>    facets   <span class="op">=</span> <span class="va">infection</span> <span class="op">~</span> <span class="va">hospital</span>,</span></span>
<span class="r-in"><span>    chart    <span class="op">=</span> <span class="st">'u'</span>,</span></span>
<span class="r-in"><span>    multiply <span class="op">=</span> <span class="fl">10000</span>,</span></span>
<span class="r-in"><span>    title    <span class="op">=</span> <span class="st">'Hospital infection rates'</span>,</span></span>
<span class="r-in"><span>    ylab     <span class="op">=</span> <span class="st">'Number of infections per 10.000 risk days'</span>,</span></span>
<span class="r-in"><span>    xlab     <span class="op">=</span> <span class="st">'Month'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="qic-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jacob Anhoej.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

